<!DOCTYPE public "-//w3c//dtd html 4.01 transitional//en" 
		"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <title>AIMS changelog</title>
  <link href="bvstyle.css" rel="stylesheet" type="text/css">
</head>

<body text="#000000" bgcolor="#ffffff" link="#0000ee" vlink="#551a8b"
 alink="#ff0000">

<center>  
<h2>AIMSdata ChangeLog</h2>
 </center>

<hr width="100%"> <br>



 <b><a href="#version-4.0">Version 4.0</a></b><br>
 <b><a href="#version-3.2.1">Version 3.2.1</a></b><br>
 <b><a href="#version-3.2">Version 3.2</a></b><br>
 <b><a href="#version-3.1.6">Version 3.1.6</a></b><br>
 <b><a href="#version-3.1.5">Version 3.1.5</a></b><br>
 <b><a href="#version-3.1.4">Version 3.1.4</a></b><br>
 <b><a href="#version-3.1.3">Version 3.1.3</a></b><br>
 <b><a href="#version-3.1.2">Version 3.1.2</a></b><br>
 <b><a href="#version-3.1.1">Version 3.1.1</a></b><br>
 <b><a href="#version-3.1">Version 3.1</a></b><br>
 <b><a href="#version-3.0.2">Version 3.0.2</a></b><br>
 <b><a href="#version-3.0.1">Version 3.0.1</a></b><br>
 <b><a href="#version-3.0">Version 3.0</a></b><br>
 <b><a href="#version-2.13c">Version 2.13</a></b><br>
 <b><a href="#version-2.12">Version 2.12</a></b><br>
 <b><a href="#version-2.11">Version 2.11</a></b><br>
 <b><a href="#version-2.10">Version 2.10</a></b><br>
 &nbsp;  

 <!-- -->

<h4> <a name="version-4.0"></a>May 28, 2010, Version 4.0</h4>

<h5>User-level changes:</h5>

<li>Improvements and fixes in various IO modules: Dicom, Nifti, Gifti, FDF
</li>
<li>Beginning of a SQL database format for graphs (QSlite files for now). This will allow partial reading and queries in large graphs databases. But the module is still experimental and the SQL database schema will probably change, so it should not be used yet to store important graphs. Conversion from and to the .arg format are still possible.
</li>

<h5>Programmer-level changes:</h5>

<li>Noticeable API change: the Motion class (for affine spatial transformations) has been renamed AffineTransformation3d in aims namespace, inherits the new Tansformation and Transformation3d classes, and undergoes some methods changes. Motion is still provided as a typedef to avoid breaking existing code, but some changes may be required anyway. See the AffineTransformation3d class documentation for details.
</li>
<li>python API: more automatic conversions between reference-counted objects (rc_ptr and Object classes) and their contents when calling wrapped C++ functions
</li>
<li>python API: the get() method of rc_ptr and Object classes is replaced by _get() so as not to shadow potential get() methods in the objects under the reference counter. In 4.0 the get() method is still present for backward compatibility and behaves as it did before, but this will be changed in a next release, so programmers are advised to use _get() instead (which is now rarely needed).
</li>

 <!-- -->

<h4> <a name="version-3.2.1"></a>January 8, 2010, Version 3.2.1</h4>

<li>New global option to Aims commandlines: <tt>--debugLevel</tt>. It is used instead of the <tt>--verbose</tt> option to print debug messages, when loading plugins for instance.
</li>
<li>Nifti IO: When loading large 4D volumes which need a reorientation in memory, don't duplicate the whole 4D volume when reorienting. This saves temporary memory allocation.
</li>
<li>Nifti IO: when no qform/sform/transformations are already in a volume written in nifti, set the origin at the center of the volume, otherwise SPM is lost (normalizaton fails)
</li>

<!-- -->

<h4> <a name="version-3.2"></a>September 4, 2009, Version 3.2</h4>

<li>Re-organization of sources of aims: aims now regroups aimsdata, aimsalgo, graph, cartobase, cartodata, IO libs (ecat, ecat+, vidaIO), and aims-gpl which is the gui part.
</li>
<li>added <tt>default_writers</tt> option in <tt>aimsrc</tt>: see <a href="config.html">the doc</a> for details
</li>
<li>the default output volumes format when no extension is specified is now NIFTI1.
</li>
<li>GIFTI IO support for meshes and textures</li>
<li>The <tt>$SHFJ_SHARED_PATH</tt> environment variable is deprecated. It is replaced with the <tt>$BRAINVISA_SHARE</tt> variable. For now it contains a single directory, but will evolve in a PATH-like behaviour in future versions. <tt>$SHFJ_SHARED_PATH</tt> still exists as a fallback for backwards compatibility.
</li>
<li>If no environment variable is set at all, the share directory is guessed from the <tt>$PATH</tt> variable.
</li>


<!-- -->

<h4> <a name="version-3.1.6"></a>May 10, 2009, Version 3.1.6</h4>

<li>IO: Fix in NIFTI-1 writer when the storage_to_memory matrix is not what it should be
</li>
<li>IO: Fix in reading pure 3D NIFTI-1 images (no 4th dimension)</li>
<li>Transformation information is set and maintained in sub-volumes and resampled volumes
</li>
<li>A fix in the Quaternion class (apply() function)
</li>
<li>IO: support TIFF format on U32 data type</li>
<li>Fix in meshExtract when no index array is needed</li>
<li>AimsFileInfo: correctly display min/max values for U8 and S8 types </li>


<!-- -->

<h4> <a name="version-3.1.6"></a>November 14, 2009, Version 3.1.5</h4>

<li>Correctly save alpha channel of RGBA volumes in Qt formats IO</li>
<li>Correctly use the "output_4d_volumes" option in NIFTI-1 writer</li>
<li>A few more minor fixes</li>


<!-- -->

<h4> <a name="version-3.1.4"></a>October 24, 2008, Version 3.1.4</h4>

<li>New global commandlines option: "output_4d_volumes" (used for NIFTI and SPM), replacing the recent "spm_output_4d_volumes".
</li>
<li>Fixes in graph sub-objects IO system.</li>
<li>Fix: file descriptor leak in Tiff reader.</li>
<li>various other minor things</li>


<!-- -->

<h4> <a name="version-3.1.3"></a>September 24, 2008, Version 3.1.3</h4>

<li>various minor things</li>


<!-- -->

<h4> <a name="version-3.1.2"></a>August 18, 2008, Version 3.1.2</h4>

<li>various minor things</li>


<!-- -->

<h4> <a name="version-3.1.1"></a>August 8, 2008, Version 3.1.1</h4>

<h5>Bug fixes:</h5>

<li>A serious bug fix in NIFTI writer: Nifti transformations were sometimes wong in the .nii file, event when they were OK in the .minf file.
</li>
<li>fixed a recent bug in the volume type converters when using rescaling which could show side effects in various commands
</li>
<li>Fixes and improvements in graphs reading when containing data stored as labels volumes. Changed the way anatomist handles them to a much cleaner behaviour.
</li>
<li>many other less important fixes</li>

<h5>Minor improvements:</h5>

<li>some minor (not user-visible) improvements and additions to the libraries
</li>


<!-- -->

<h4> <a name="version-3.1"></a>January 4, 2008, Version 3.1</h4>

<li>
  <font color="#c00000">SPM images IO: <b><font color="#ff0000">***CAUTION***</font>,
    behaviour change</b></font>: Read <a href="spmformat.html">this document</a>
    for details. The default settings for AIMS is now to behave like SPM2, not like SPM99 anymore.
</li>
<li>NIFTI-1 volume format support, by Guillaume Flandin, using niftilib
</li>
<li>PLY mesh format support, using the Rply library</li>
<li>Improvements in the Qt4 compatibility</li>
<li>complete reimplementation of the mesh cutting algorithm (used in anatomist). It doesn't crash anymore, but leaves holes or incorrect things on meshes with overlapping triangles
</li>
<li>complements and improvements in the IO system and its suppport for various object types
</li>
<li>headers were added to data objects which did not have one (Motion, buckets, Hierarchy, Object, ...)
</li>
<li>The Quaternion class has been moved from anatomist to aimsdata. Bridges between Quaternions and Motions.
</li>
<li>python bindings for a large part of aimsdata API (all data types and IO): see the pyaims project
</li>
<li>... far too many changes to possibly list them...</li>
<li>and many many bugfixes</li>


<!-- -->

<h4> <a name="version-3.0.2"></a>April 27, 2006, Version 3.0.2</h4>

<h5>Bug fixes:</h5>
<li>Image formats handled via the Qt plugin (png, bmp...) had several bugs that 
  caused image corruption when saving/reading them. It has been fixed, and support 
  for int types wider than 8bit has been unregistered (it can't work actually).
</li>
<li>Some 3D MINC images got an incorrect value (NaN or infinity) for 4th dimension in Aims
</li>
<li>A huge memory leak has been fixed in AimsSubVolume in multiple output files
  mode, and some optimizations were done in this case.
</li>
<li>The sourcecode now compiles with gcc 4.1</li>
<li>Many other minor bugs were fixed</li>


<!-- -->

<h4> <a name="version-3.0.1"></a>September 22, 2005 - Version 3.0.1</h4>
    
<h4>Bug fixes:</h4>
  <li><b>important bugfix</b> in interpolation code which may affect, especially, all 
    diffusion tracking algorithms
  </li>
  <li>a few compilation warnings and configuration fixes / cleanups</li>
  <li>AimsSubVolume supports a wider range of data types</li>
  <li>The gui part is now compatible with Qt 4 - more compatibility headers</li>
  <li>Fixed IO type Texture of Point2df which did not appear amongst supported IO types</li>
  <li>Fixes in management of Aims objects contained in graphs</li>
  <li>Fixed SPM writin of float/double images which were sometimes written 
    in (short + scale factor) mode when they should not
  </li>


<h4> <a name="version-3.0"></a>May 18, 2005 - Version 3.0</h4>
    
<h4>User-level changes:</h4>
  <li>Volumes IO: better support for large files. Memory mapping has been automatically 
    enabled on GIS and SPM volumes when image sizes become large compared to the free 
	memory size (linux only right now) or to absolute amounts. This is especially useful 
	when loading large data in Anatomist or for data conversions. Note that not all 
	volume formats can benefit the same optimization: depending on the disk and memory 
	format of low-level data, the whole file must be copied to a temporary file in 
	some situations (always needed for SPM volumes). Prefer GIS format when possible...
  </li>
  <li>SPM volumes of FLOAT data can now be saved as short int + scale factor when it 
    appears to be possible without precision loss. The drawback right now is that 
	detecting the possibility of doing it takes some time and it's slower.
  </li>
  <li>Minc format IO support: thanks to Olivier Coliot who wrote the reader/writer classes, there is 
    now a Minc plugin in Aims. At the moment only 3D files are supported (not 4D) and the datatype 
    detection may be improved in the future, but the base is here now. The plugin needs the Minc 
    library.
  </li>
  <li>The Ecat format IO has been ported to Windows</li>
  <li>Graphs incompletely loaded (without buckets or meshes, like in the recognition program) and 
    saved back to disk now load their sub-objects before they are saved, so nothing is lost anymore.
    The drawback is that saving them is much longer and consumes far more RAM.
  </li>
  <li>Porting to 64 bit systems: done by Dimitri</li>
  <li>Version numbering: all our projects will have the same version number: 3.0 for 
    this release
  </li>

<h4>Programmer-level changes:</h4>
  <li>Allocators have changed a bit, and their choice has been facilitated by a 
    helper / factory class.
  </li>
  <li>Porting to 64 bit systems. This port implies some modifications on some programming rules: we 
    sould avoid using the <tt>long</tt> type anymore, but always fixed size types: 
    <tt>int32_t</tt>, <tt>int8_t</tt> etc, so <tt>AimsData&lt;long&gt;</tt> should be replaced 
    with <tt>AimsData&lt;int32_t&gt;</tt> in all Aims code.
  </li>
  <li>In cartobase, the generic object API has been rewritten in a cleaner way <tt>GenObject</tt> 
    becomes <tt>GenericObject</tt>. A compatibility interface is provided so code will not break, 
    but we plan to remove it once we have cleaned all code (maybe in the next version).
  </li>
  <li>Preparations for deep changes in Aims API: some main classes will be re-written in a new 
    library: cartodata. The first is the 4D volume class (<tt>aims::AimsData</tt>) which will 
    become <tt>carto::Volume</tt>, a newer, cleaner and more powerful implementation. 
    In this release, <tt>AimsData</tt> is only a wrapper for <tt>Volume</tt>. 
    Compatibility will be preserved. Moreover the wrapping can be disabled by a #define (the 
    older implementation is still present in the source code).
  </li>
  <li>A Python interface project for Aims has been started: pyaims, at the moment it allows 
    manipulating volumes (including IO), either under <tt>AimsData</tt> or <tt>Volume</tt> shape. 
    Meshes will be added soon.
  </li>
  <li>Porting to gcc 4.0 compiler</li>


<br>



<h4><a name="version-2.13c"></a>17/11/2004 - Bugfix update 2.13(c)</h4>

  <li>fixes in SPM IO</li>
  <li>little doc on coordinates systems of AIMS and SPM: 
    <a href="referentials.html">here</a>
  </li>
  <li>fixes on the Windows port, especially the graph writer which could write the .data directory 
    in the wrong location (in the current directory). This bug affected saving ROI sessions from 
    Anatomist, for instance.
  </li>
  <li>various other minor fixes</li>


<br>


<h4><a name="version-2.13b"></a>06/07/2004 - Bugfix update 2.13(b)</h4>


  <li>bucket writer wrote wrong voxel sizes</li>
  <li>fix in list repesentations of attributed objects browser, this showed up in Anatomist</li>
  <li>vida reader crashed on large files (with more than ~250 slices)</li>


<br>


<h4> <a name="version-2.13"></a>18/02/2004 - Version 2.13</h4>
    
<h4>User-level changes:</h4>
  <li>Porting to Windows: the sources can now be compiled on Windows platforms
    using either cygwin or MinGW gcc compilers and environments. I guess there will 
    still be some little glitches but lots of commands now work well on Windows. 
    <b>Note:</b> Vida and Ecat IO modules don't compile under MinGW because they 
	use a missing rpc/hdr library.
  </li>


  <li><font color="#c00000">SPM images IO: <b><font color="#ff0000">***CAUTION***</font>, 
    behaviour change</b></font>: Read <a href="spmformat.html">this document</a>
    for details. There have been a number of fixes, improvements and changes.
  </li>
  
  <li>Fixes in Dicom reader allowing to still read images with partially incoherent
    headers
  </li>
  
  <li>Beginning of a TIFF format reader (by Vincent Frouin), but it is not finished 
    yet and apparently only partially working.
  </li>
  
  <li>Rework of environment variables handling: to access data, several environment 
    variables were needed: <tt>SHFJ_SHARED_PATH</tt>, <tt>AIMS_PATH</tt>, 
    <tt>ANATOMIST_PATH</tt>, <tt>SIGRAPH_PATH</tt> etc.
    Now a more standard shared data structure can be adopted and only one environment 
    variable is needed (<tt>SHFJ_SHARED_PATH</tt>). The older way (with several variables) 
    is still supported. Shared data can be organized in <tt>$SHFJ_SHARED_PATH/shfj</tt>, 
    <tt>$SHFJ_SHARED_PATH/aims</tt>, <tt>$SHFJ_SHARED_PATH/anatomist</tt>, 
    <tt>$SHFJ_SHARED_PATH/sigraph</tt> etc. If <tt>SHFJ_SHARED_PATH</tt> is set to 
    <tt>/usr/local/share</tt> or <tt>/usr/share</tt>, you just get a completely 
    standard organization.
  </li>
  
  <li>Settings files for AIMS, currently used to specify SPM IO conventions. There is 
    one site-wide settings files (in the shared directory of Aims) and one personal 
    <tt>$HOME/.aimsrc</tt> file. See <a href="config.html">this page</a> for further 
    explanations.
  </li>
  
  <li>Many other things... I can't remember</li>

<h4>Programmer-level changes:</h4>
  <li>Utility classes & functions for portably handling files, directories and 
    filenames (made for windows porting...) [in cartobase library]
  </li>
  
  <li>Threads: the threading package has moved from aimsalgo library (closed-source) 
    to cartobase library (GPL). It implements a portable C++ interface to threads, and 
    will be used in Anatomist now.
  </li>
  
  <li>Many other things... I can't remember</li>

<br>
 
<h4> <a name="version-2.12"></a>27/03/2003 - Version 2.12</h4>
    
<h4>User-level changes:</h4>
   <li>More explanatory IO error messages</li>
   <li>AimsFileConvert can handle RGB/RGBA images</li>
   <li>Many many other things I don't remember...</li>
    
<h4>Programmer-level changes:</h4>
   <li><tt>libshfj</tt> has been renamed <tt>libcartobase</tt> (beginning of 
   <b>Cartograph</b> project)</li>

   <li>Some classes have moved from aims and graph libraries to cartobase, 
   especially low-level general utility classes. More of them should move in 
   the future. For now: <tt>stream</tt> classes, exceptions, <tt>GenObject</tt> 
   and associated classes (formerly named <tt>DataExchanger</tt>), 
   <tt>AttributedObject</tt> and IO (including syntax), Python-like IO for 
   <tt>Object</tt>, string conversion templates, <tt>DataTypeCode</tt> 
   template, basic <tt>typedef</tt>s...</li>

   <li>Some classes still in aims have moved to the new namespace 
   <tt>carto</tt>, like <tt>OptionParser</tt> and related classes</li>
   
   <li>Classes renamings (in cartobase):
     <ul>
     <li><tt>DataExchanger</tt> renamed <tt>GenObject</tt></li>
     <li><tt>RcExchanger</tt> renamed <tt>Object</tt></li>
     <li><tt>DataExchangerValue</tt> renamed <tt>TypedObject</tt></li>
     <li><tt>SyntaxedExchanger</tt> renamed <tt>SyntaxedObject</tt></li>
     <li>...</li>
     </ul>
   </li>
   
   <li>Externalization (as plugins) of IO formats that use external libraries 
   (I mean external to aims, even for libraries made in SHFJ): Vida, Ecat, 
   Jpeg, Dicom</li>
   
   <li>Many many other things I don't remember...</li>

<br>
 
<h4> <a name="version-2.11"></a>31/10/2002 - Version 2.11</h4>
    
<h4>User-level changes:</h4>
   <li>Nothing has been recorded...</li>
    
<h4>Programmer-level changes:</h4>
   <li>nothing has been recorded...</li>
<br>
 
<h4><a name="version-2.10"></a>09/07/2002 - Version 2.10</h4>
 
<h4>User-level changes:</h4>
     <li>beginning of ChangeLog: nothing yet</li>

<h4>Programmer-level changes:</h4>
     <li>nothing yet</li>
<br>
&nbsp;

</body>
</html>









